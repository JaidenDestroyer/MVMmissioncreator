<!DOCTYPE html>
<html>
	<head>
		<title>Mission Editor</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/2.4.6/fabric.min.js"></script>
		<!-- <script type="text/javascript" src="./js/node.js"></script> -->
		<script type="text/javascript" src="./js/wavebar.js"></script>
		<link rel="stylesheet" href="./css/canvas.css">
	</head>
	<body>
		<canvas id="editor" width="3000" height="3000"></canvas>
	</body>
	<script>


	var canvas = new fabric.Canvas('editor', { renderOnAddRemove: false, backgroundColor: '#333'});
  	var editor = new wavebar(canvas);
  	//editor.loadPop(JSON.parse(localStorage.getItem('population')));
  	let items = ['./icons/Leaderboard_class_pyro_flare.png',
  		'./icons/Leaderboard_class_scout_stun_armored.png',
  		'./icons/Leaderboard_class_soldier_blackbox.png',
  		'./icons/Leaderboard_class_heavy_deflector.png',
  		'./icons/Leaderboard_class_engineer.png',
  		'./icons/Leaderboard_class_demo_bomber.png',
  		'./icons/Leaderboard_class_demo_burst.png',
  		'./icons/Leaderboard_class_heavy_steelfist.png',
  		'./icons/Leaderboard_class_scout_fan.png',
  		'./icons/Leaderboard_class_heavy_champ.png',
  		'./icons/Leaderboard_class_heavy.png',
  		'./icons/Leaderboard_class_sniper.png',
  		'./icons/Leaderboard_class_demo.png',
  		'./icons/Leaderboard_class_pyro.png',
  		'./icons/Leaderboard_class_scout.png',
  		'./icons/Leaderboard_class_medic.png',
  		'./icons/Leaderboard_class_spy.png',
  	];

  	let classes = [];
  	for (let i = 0; i < 20; i++)
  	{
  		var image = new Image();
  		image.onload = function(){
  			if (!classes.includes(this.src))
  			{
  				var count = Math.floor(Math.random()*10)
  				if (count != 0)
  				{
  					const type = Math.floor(Math.random()*50);
  					editor.addIcon(this, count.toString(), '#00cfec');
  					/*
  					if (type > 40)
  					{
  						editor.addIcon(this, count.toString(), '#bb1500');
  					}else if (type < 5)
  					{
  						 editor.addIcon(this, count.toString(), '#00cfec');
  					}else {
  						editor.addIcon(this, count.toString());
  					}
  					*/
  					classes.push(this.src);
  					editor.renderAll();
  				}
  			}
  		}
  		image.src = items[Math.floor(Math.random()*items.length)];
  	}
	</script>
</html>
